# π PiFlow - 円周率記憶トレーニングツール

円周率（π）の小数点以下の桁を効率的に記憶・練習するための、数学的で美しいWebアプリケーション

**MASTER THE INFINITE**

## 🌐 デモ

**[https://mutikuda.github.io/PiFlow/](https://mutikuda.github.io/PiFlow/)**

## ✨ 特徴

- 🎯 **リアルタイムフィードバック**：入力した瞬間に正誤がわかる
- 👁️ **任意切替ヒント機能**：必要な時だけヒントを表示できるプラクティスモード
- 🎵 **メカニカルキーボード音**：Holy PandaとTopre スイッチの本物の打鍵音
- 📝 **語呂合わせ支援**：200桁分の語呂合わせを表示（プラクティスモード時）
- ⏪ **巻き戻し機能**：プラクティスモードで数字をタップして好きな位置に戻れる
- 📊 **いつでも結果確認**：練習中でも結果画面に移動可能
- 🎨 **コンパクトなデザイン**：緩やかなborder-radiusとミニマルなレイアウト
- 📱 **完全レスポンシブ**：スマホ・タブレット・PCに対応、画面内に常に収まるレイアウト
- 💾 **完全ローカル**：データはすべてブラウザ内に保存、プライバシー保護
- ⚡ **超高速**：Vite + Reactで瞬時に起動
- ⌨️ **デュアル入力**：キーボードとタッチパッドの両方に対応

## 🎮 ゲームフロー

### 1. ホーム画面（Idle）
- **「練習開始」** ボタンまたは **Enter** キーでゲーム開始
- あなたのベスト記録、総入力数、苦手エリア分析が表示される

### 2. プレイング（Playing）モード
- `3.` の後に続く円周率の小数点以下を1桁ずつ入力
- **正解**：クリック音 + 次の桁へ
- **不正解**：赤いシェイクアニメーション + ミスカウント増加
- **重要**：不正解でもゲームは継続、何度でも挑戦可能

### 3. ヒント機能（プラクティスモード）👁️
ユーザーが明示的に **Hint ボタン** を押すことで以下の機能が有効化：

- 📚 **語呂合わせ表示**：現在位置に対応する語呂合わせを表示（200桁分対応）
- 👀 **次の10桁のヒント**：グレーアウトで次に入力すべき数字を表示
- ⏪ **数字タップで巻き戻し**：表示された数字をタップして好きな位置に戻れる

Hintボタンで **いつでもON/OFF切替可能**

### 4. 結果画面（Finished）📊
- 📊ボタンまたはゲーム終了で結果画面へ遷移
- 到達桁数、入力速度、ミス回数を表示
- 次に入力すべき数字を確認
- 新記録達成時には🏆トロフィーを表示

## 🎨 デザインコンセプト

### コンパクトで洗練されたUI
最新の実装では、無駄なスペースを削減し、コンパクトで使いやすいレイアウトを実現：

- **緩やかなborder-radius**：`rounded-lg`を基本として統一感のあるデザイン
- **細いボーダー**：`border`（1px）で軽やかな印象
- **最小限のパディング**：必要な情報に集中できる設計
- **1行ヘッダー**：現在の桁数とベストスコアを1行に集約

### 数学的・幾何学的美学
円周率という数学的なテーマに合わせた、洗練されたダークモードデザイン：

- **カラーパレット**：
  - Primary: `#0066ff` (ブルー)
  - Secondary: `#00ccff` (シアン)
  - Accent: `#ff3366` (レッド/アクセント)
  - Success: `#00ff88` (グリーン)
  - Background: `gray-950` (ほぼブラック)

- **タイポグラフィ**：
  - Display Font: `DM Sans` - 大胆で現代的
  - Monospace: `Azeret Mono` - 数字表示用

- **ビジュアルエフェクト**：
  - グリッド背景パターン
  - グラデーションのグロー効果
  - スムーズなアニメーション（float, glow, slide-up, shake）
  - バックドロップブラー

### レイアウト設計
- **固定NumPad**: 画面下部に常に表示、スクロールしても動かない
- **スクロール可能コンテンツ**: 上部のコンテンツは独立してスクロール
- **レスポンシブ**: 画面サイズに応じて最適化、常に画面内に収まる

## 🏗️ 技術スタック

- **フロントエンド**：React 18 + TypeScript
- **ビルドツール**：Vite
- **スタイリング**：Tailwind CSS
- **ストレージ**：LocalStorage
- **デプロイ**：GitHub Pages

## 📦 セットアップ

```bash
# 依存関係のインストール
npm install

# 開発サーバー起動
npm run dev

# ビルド
npm run build

# プレビュー
npm run preview
```

## 🎯 使い方

### 基本操作

1. **練習開始**
   - `Enter`キーまたは「練習開始」ボタンをクリック

2. **数字を入力**
   - **キーボード**: `0-9`キーを押す
   - **タッチパッド**: 画面下部のNumPadをタップ
   - 円周率 `3.` の後に続く数字を1桁ずつ入力

3. **フィードバック**
   - ✓ **正解**：クリック音 + 次の桁へ
   - ✗ **不正解**：赤いシェイク + ミスカウント増加（ゲームは継続）

4. **ヒント機能**
   - 👁️ **Hintボタン**をクリックしてヒント表示をON/OFF
   - 語呂合わせ、次の10桁、巻き戻し機能が利用可能

5. **結果確認**
   - 📊ボタンで結果画面に移動
   - または練習を続けて自己ベストを更新

### コントロールボタン

ヘッダーバーの右側に配置：

- 👁️ **Hint**：ヒント表示のON/OFF切り替え
- 📊 **Results**：結果画面に移動
- 🔊/🔇 **Mute**：クリック音のON/OFF

### キーボードショートカット

- `Enter`：練習開始（ホーム画面のみ）
- `0-9`：数字入力（プレイ中）

## 📊 記録管理

すべてのデータはブラウザのLocalStorageに保存されます：

- **最高桁数**（maxDigits）：あなたのベスト記録
- **記録達成日時**（maxDigitsDate）：記録を達成した日時
- **総セッション数**（totalSessions）：練習回数
- **総入力桁数**（totalDigitsTyped）：累計入力数
- **桁位置別ミス回数**（mistakesByIndex）：苦手エリア分析用

## 🎵 オーディオフィードバック

入力時に本物のメカニカルキーボード音（Holy Panda、Topre スイッチ）を再生。
3種類の音をランダムに切り替えて自然な打鍵感を演出します。

🔊/🔇ボタンでいつでもON/OFF可能。

**音源**：[kbsim プロジェクト](https://github.com/tplai/kbsim)（MIT License）

## 🔐 プライバシー

- すべてのデータはブラウザ内（LocalStorage）に保存
- サーバーへのデータ送信なし
- アナリティクス不使用
- 個人を特定できる情報は一切収集しない

## 🚀 デプロイ

### GitHub Pages（現在の設定）
```bash
npm run build
# GitHub Actionsで自動デプロイ
```

プロジェクトは `vite.config.ts` で GitHub Pages向けに設定されています。

**公開URL**: [https://mutikuda.github.io/PiFlow/](https://mutikuda.github.io/PiFlow/)

## 📈 パフォーマンス

- ✅ 入力から正誤判定まで：< 100ms
- ✅ スムーズなアニメーション：60fps
- ✅ 最小限のバンドルサイズ
- ✅ 瞬時に鳴るクリック音

## 🏗️ プロジェクト構造

```
PiFlow/
├── src/
│   ├── components/
│   │   └── PracticeMode/
│   │       ├── index.tsx          # メインコンポーネント
│   │       ├── NumPad.tsx         # 数字入力パッド
│   │       └── DigitInput.tsx     # 入力フィールド（未使用）
│   ├── hooks/
│   │   ├── useGameState.ts        # ゲーム状態管理
│   │   └── useLocalStorage.ts    # LocalStorage管理
│   ├── services/
│   │   ├── piDigits.ts            # 円周率データ管理
│   │   └── goroawase.ts           # 語呂合わせデータ管理
│   ├── styles/
│   │   └── globals.css            # グローバルスタイル
│   ├── types/
│   │   └── index.ts               # TypeScript型定義
│   ├── App.tsx                    # アプリルート
│   └── main.tsx                   # エントリーポイント
├── public/
│   └── sounds/
│       ├── mechanical-switch-1.mp3  # Holy Panda音
│       ├── mechanical-switch-2.mp3  # Holy Panda音
│       ├── mechanical-switch-3.mp3  # Topre音
│       └── LICENSE                  # 音源ライセンス
├── dist/                          # ビルド出力
└── index.html                     # HTMLエントリー
```

## 🤝 コントリビューション

1. このリポジトリをフォーク
2. 新しいブランチを作成 (`git checkout -b feature/amazing-feature`)
3. 変更をコミット (`git commit -m 'Add some amazing feature'`)
4. ブランチにプッシュ (`git push origin feature/amazing-feature`)
5. プルリクエストを作成

## 📝 ライセンス

このプロジェクトはMITライセンスの下で公開されています。

## 🙏 謝辞

- 円周率データ生成アルゴリズム
- 語呂合わせ：円周率記憶コミュニティの貢献
- デザインインスピレーション：数学的美学、幾何学パターン
- メカニカルキーボード音：[kbsim プロジェクト](https://github.com/tplai/kbsim) by Thomas Lai (MIT License)

---

**円周率をマスターする旅へ、今すぐスタート！ 🚀**
